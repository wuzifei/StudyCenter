@model StudyCenter.Model.ViewModel.TestPaperDo
@{
    ViewBag.Title = "做题答卷";
    Layout = "~/Views/Shared/_Header.cshtml";
}

@section Head
{
    @Styles.Render("/Content/CSS/studyindex.css")
    <link href="~/Scripts/jquery-easyui-1.3.6/themes/metro-blue/easyui.css" rel="stylesheet" />
    <link href="~/Scripts/jquery-easyui-1.3.6/themes/icon.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-easyui-1.3.6/jquery.easyui.min.js"></script>
    <link href="~/Content/CSS/Do.css" rel="stylesheet" />
	<script src="~/Scripts/ueditor1_4_3-utf8-net/ueditor.config.js"></script>
	<script src="~/Scripts/ueditor1_4_3-utf8-net/ueditor.all.min.js"></script>
}



@*选项卡开始*@
<script type="text/javascript">

	var editor = UE.getEditor("editor");

    $.ready(function() {
    });

    function ShowHide(bqid) {
        var btn = $("#BQ-" + bqid + " .btnShowHide")[0];
        if (btn.value == "-收起") {
            $("#BQ-" + bqid + " .SmallQuestion").hide();
            btn.value = "+展开";
        } else {
            $("#BQ-" + bqid + " .SmallQuestion").show();
            btn.value = "-收起";
        }

    }

</script>

@section footer{

     <p>hello this is Footer</p>
}

<form id="TestpaperForm" method="POST" action="/testpaper/report/@Model.TestPaper.ID">
    <div class="TestPaperTitle">
        <h1>数据库原理期中测试A卷</h1>
        
        <div class="TitleContent">
            <p>说明：请学生们不要作弊，不然将无法获得学士学位!</p>
            <p style="color:red;">注意：本考试系统具有防作弊功能，若发现雷同试卷，都将将视为作弊!</p>
            <span style="margin-right: 100px;">出题人：吴自飞</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span>考试时间：90分钟</span>
        </div>
    </div>
    @{           
        var i = 1;
        foreach (var bigQuestion in Model.BigQuestionInfos)
        {
          <div class="BigQuestion" id="BQ-@(bigQuestion.Id)">
              <div class="BigTitle">
                  <div class="Title">
                      <span>一.@(bigQuestion.Title)</span>
                      <span class="BigQuestionInfo">(共@(bigQuestion.SmallQustions.Count())道题,总分@(bigQuestion.Score)分)</span>
                  </div>
                  <div class="ShowHideBtn">
                      <input class="btnShowHide" type="button" value="-收起" onclick="ShowHide('@(bigQuestion.Id)');"/>
                  </div>
              </div>
              @foreach (var smallQustion in bigQuestion.SmallQustions)
              {
                  <div class="SmallQuestion" id="@(bigQuestion.Id)-@(smallQustion.QuestionType)-@(smallQustion.Id)">
                      
                      <div class="SmallTitle">
                          @(i++).@(smallQustion.Title) (@(smallQustion.Score)分)
                      </div>

                      <div class="SmallQuestionAnswer">
                          @{
                              var btName =bigQuestion.Id + "-" + smallQustion.QuestionType + "-" + smallQustion.Id;
                          }
                          @if (smallQustion.Choices.Any())//选择题
                          {                                  
                              var select = 'A';
                              foreach (var choice in smallQustion.Choices)
                              {

                                  if (choice != "")
                                  {
                                      <p>
                                          @if (smallQustion.IsMutilSelect != null && smallQustion.IsMutilSelect.Value == true)
                                          {
                                              <input type="checkbox" id="@(btName)-@(select)" name="@(btName)" value="@select" />
                                          }
                                          else
                                          {
                                              <input type="radio" id="@(btName)-@(select)" name="@(btName)" value="@select"/>
                                          }
                                          <label for="@(btName)-@(select)">
                                              <span>@(select++).</span>
                                              @choice
                                          </label>
                                      </p>
                                  }
                              }
                          }
                          else if (@smallQustion.QuestionType == "SQ")//简答题
                          {
	                          <div class="UserAnswer">
								<script id="editor" type="text/plain" name="@(btName)" >
								</script>
		                          @*<textarea cols="25" rows="5" name="@(btName)" ></textarea>*@
	                          </div>
                          }
                          else if (@smallQustion.QuestionType == "FQ") //填空题
                          {
                              <div class="UserAnswer">
                                  答案：<input type="text" name="@(btName)" />
                              </div>
                          }
                          else//判断题
                          {
                              <div class="UserAnswer">
                                  <input type="radio" name="@(btName)" value="true" />Yes
                                  <input type="radio" name="@(btName)" value="false"/>No
                              </div>
                          }
                      </div>
                      
                  </div>
              }
        </div>
        }
    }
    

    <div class="submitBar">
        <input  type="submit" value="提交"/>
    </div>
</form>
